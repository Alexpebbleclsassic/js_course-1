{"version":3,"sources":["location_api.js","dom.js","index.js"],"names":["LocationApi","fetch","then","res","status","json","Promise","reject","catch","console","log","rej","myIp","Dom","lat","document","getElementById","long","city","country","hover","animation","circle1","circle2","circle3","style","display","i","interval","setInterval","background","clearInterval","crd","value","latitude","longitude","country_name","locationApi","dom","btn","addEventListener","showPreloader","setTimeout","getMyIp","getMyLocation","ip","setCoordinates","hidePreloader"],"mappings":"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","file":"lesson_21.e2903b74.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\r\n    getMyIp() {\r\n        return fetch('https://api.ipify.org?format=json')\r\n            .then(res => {\r\n                if(res.status === 200) {\r\n                    return res.json();\r\n                } else {\r\n                    return Promise.reject(res.status);\r\n                }\r\n            })\r\n            .catch(rej => console.log('Получение IP не удалось. Error: ' + rej));\r\n    };\r\n    \r\n    getMyLocation(myIp) {\r\n        return fetch(`https://freegeoip.net/json/${myIp}`)\r\n            .then (res => {\r\n                if (res.status === 200) {\r\n                    return res.json();\r\n                }\r\n            })\r\n            // .then(res => console.log(res.latitude, res.longitude))\r\n            .catch(rej => console.log('Получение координат по IP не удалось. Error: ' + rej));\r\n    }\r\n};","export default class Dom {\r\n    constructor() {\r\n        const lat = document.getElementById('lat');\r\n        const long = document.getElementById('long');\r\n        const city = document.getElementById('city');\r\n        const country = document.getElementById('country');\r\n\r\n        const hover = document.getElementById('hover');\r\n        const animation = document.getElementById('animation');\r\n        const circle1 = document.getElementById('circle1');\r\n        const circle2 = document.getElementById('circle2');\r\n        const circle3 = document.getElementById('circle3');\r\n    }\r\n\r\n    showPreloader() {\r\n        hover.style.display = 'block';\r\n        animation.style.display = 'block';\r\n        this.i = 2;\r\n        this.interval = setInterval(() => {\r\n            switch (this.i) {\r\n                case 1:\r\n                    circle1.style.background = 'darkmagenta';\r\n                    circle3.style.background = 'orange';\r\n                    break;\r\n                case 2:\r\n                    circle1.style.background = 'orange';\r\n                    circle2.style.background = 'darkmagenta';\r\n                    break;\r\n                case 3:\r\n                    circle2.style.background = 'orange';\r\n                    circle3.style.background = 'darkmagenta';\r\n                    this.i = 0;\r\n                    break;\r\n            }\r\n            this.i += 1;\r\n        }, 300);\r\n    };\r\n\r\n    hidePreloader() {\r\n        hover.style.display = 'none';\r\n        animation.style.display = 'none';\r\n        clearInterval(this.interval);\r\n        this.i = 2;\r\n        circle1.style.background = 'darkmagenta';\r\n        circle2.style.background = 'orange';\r\n        circle3.style.background = 'orange';\r\n\r\n    };\r\n\r\n    setCoordinates(crd) {\r\n        lat.value = crd.latitude;\r\n        long.value = crd.longitude;\r\n        city.value = crd.city;\r\n        country.value = crd.country_name;\r\n    };\r\n}","import LocationApi from './location_api';\r\nimport Dom from './dom';\r\n\r\nconst locationApi = new LocationApi();\r\nconst dom = new Dom();\r\nconst btn = document.getElementById('btn');\r\n\r\nbtn.addEventListener('click', () => {\r\n    dom.showPreloader();\r\n    setTimeout(() => {\r\n        locationApi.getMyIp()\r\n                .then(res => locationApi.getMyLocation(res.ip))\r\n                .then(res => dom.setCoordinates(res))\r\n                .then(res => dom.hidePreloader())\r\n                .catch(rej => {\r\n                    dom.hidePreloader();\r\n                    console.log('Error:', rej);\r\n                });\r\n    }, 2000);\r\n})\r\n"]}